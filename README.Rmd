---
output: github_document
editor_options: 
  markdown: 
    wrap: 72
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# rpigpior

<!--  <a href="https://mnr.github.io/rpigpior/"><img src="man/figures/logo.png" align="right" height="138"></a> -->

<!-- badges: start -->

[![R-CMD-check](https://github.com/mnr/rpigpior/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/mnr/rpigpior/actions/workflows/R-CMD-check.yaml)

<!-- badges: end -->

`rpigpior` allows the R programming language access to the Raspberry Pi
GPIO using libgpiod. Because libgpiod is already included in Raspbian,
there is nothing else to install.

`rpigpior` provides these tools:

-   is.rpi - Returns TRUE if this code is running under Raspbian
-   rpi_get - Returns the value of a board level pin (1-40) or an error
    if the pin isn't a data line (3.3v, 5v, or GROUND)
-   rpi_set - Sets a pin to on or off
-   rpi_monitor - watches a pin for a number of rising or falling events

## Installation

`rpigpior` is hosted on github. Until it arrives at cran, you can
install the development version of rpigpior from
[GitHub](https://github.com/mnr/rpigpior) with:

``` r
remotes::install_github("mnr/rpigpior")
```

Most documentation will tell you to use devtools, but
`install.packages("devtools")` on a Raspberry Pi is an onerous task.

Once you've installed, use `library` just like any other R package:

``` r
library(rpigpior)
```

[Related mailing list:
linux-gpio\@vger.kernal.org](https://www.spinics.net/lists/linux-gpio/)

## How to use rpigpior

It's helpful to check if your code is running on a Raspberry Pi.

``` R
if ( is.rpi() ) {
   print("Yes, this is a RPi")
} else {
   print ("No, this is not a RPi")
}
```

If you connect a switch to board pin 40, this code will read it:

``` R
library(rpigpior)

rpi_get(40) # reads board pin 40
rpi_get(c(7,40)) # reads board pins 7 and 40

> GPIO004  GPIO21
        0       1
```

That assumes the switch to board pin 40 is "pushed" or closed. By the
way, there is a diagram of this located in the *articles* section of the
website (as identified in the package description)

If you have a LEDs connected to board pin 19, 21, and 23, this code will
turn them on, then one of them off, then all of them off

```         
library(rpigpior)

toggleThese <- c(19,21,23)
rpi_set(toggleThese,1)
Sys.sleep(1)
rpi_set(toggleThese, c(1,0,1))
Sys.sleep(1)
rpi_set(toggleThese, 0)
```
